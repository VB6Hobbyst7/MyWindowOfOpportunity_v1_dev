/*!
 * jQuery SilverTrack
 * https://github.com/tulios/jquery.silver_track
 * version: 0.4.0
 */
(function(n,t){var r="silverTrackInstance",i;n.fn.silverTrack=function(t){var u=n(this),f;return u.data(r)?u.data(r):(t=n.extend({},n.fn.silverTrack.options,t),f=new i(u,t),u.data(r,f),f)};n.fn.isSilverTrackInstalled=function(){var t=n(this);return t.data(r)!=null};n.fn.silverTrack.options={perPage:4,itemClass:"item",mode:"horizontal",autoHeight:!1,cover:!1,duration:600,easing:"swing",animateFunction:null,animationAxis:"x"};i=function(n,t){this.options=t;this.container=n;this.paginationEnabled=!0;this.calculateTotalPages=!0;this.currentPage=1;this.totalPages=1;this.plugins=[];this.reloadItems()};i.prototype={start:function(){this.options.animateFunction===null&&this._validateAnimationEasing();this._executeAll("beforeStart");this._init();this._executeAll("afterStart")},goToPage:function(t,i){var f,e;i=n.extend({animate:!0},i);var o=i.animate?this.options.duration:0,u=this.options.cover&&t===1,s=t>this.currentPage?"next":"prev",r=u?this._getCover():this._calculateItemsForPagination(t);this._canPaginate(t)&&r.length>0&&(f=this._calculateItemPosition(r.get(0)),e={name:s,page:t,cover:u,items:r},r.length<this.options.perPage&&!u&&(this.isModeHorizontal()||this.isAxisY())&&(f-=this._calculateMaxShiftAvailable(r)),this._executeAll("beforePagination",[e]),this.currentPage=t,this.paginationEnabled=!1,this._slide(f,e,o),this._adjustHeight(r,o))},next:function(){this.goToPage(this.currentPage+1)},prev:function(){this.goToPage(this.currentPage-1)},hasPrev:function(){return!(this.currentPage===1)},hasNext:function(){return!(this.currentPage===this.totalPages||this.totalPages<=1)},isModeHorizontal:function(){return this.options.mode==="horizontal"},isAxisY:function(){return this.options.animationAxis==="y"},restart:function(t){t=n.extend({page:1,keepCurrentPage:!1,animate:!1},t);t.keepCurrentPage&&(t.page=this.currentPage);this._executeAll("beforeRestart");this.container.css("height","");this._getItems(!0).css("top","");this.paginationEnabled=!0;this.currentPage=1;this._init();this.goToPage(t.page,{animate:t.animate});this._executeAll("afterRestart")},install:function(n){return this.plugins.push(n),this._callFunction(n,"onInstall"),this},reloadItems:function(){this._items=null},updateTotalPages:function(n){this.calculateTotalPages=!1;this.totalPages=this._abs(n);this._executeAll("onTotalPagesUpdate")},findPluginByName:function(n){for(var i,t=0;t<this.plugins.length;t++)if(i=this.plugins[t],i.PluginName===n)return i;return null},_init:function(){this.animatedAttribute=this.isAxisY()?"top":"left";this._positionElements();this.calculateTotalPages&&this._calculateTotalPages()},_getItems:function(t){return this._items||(this._items=n("."+this.options.itemClass,this.container)),!t&&this.options.cover?this._items.not(":first"):this._items},_getCover:function(){return n("."+this.options.itemClass+":first",this.container)},_canPaginate:function(n){return!this.paginationEnabled||n>this.totalPages||n<1?!1:!0},_slide:function(n,t,i){var r=this,u={},f;u[this.animatedAttribute]="-"+n+"px";f=function(){r.paginationEnabled=!0;r._executeAll("afterAnimation",[t])};this._executeAll("beforeAnimation",[t]);this._animate(u,i,f)},_adjustHeight:function(t,i){var r,u;this.options.autoHeight===!0&&(r=0,this.isModeHorizontal()?r=n(t[0]).outerHeight(!0):t.each(function(t,i){r+=n(i).outerHeight(!0)}),u={items:t,newHeight:r},this._executeAll("beforeAdjustHeight",[u]),this._animate({height:r+"px"},i),this._executeAll("afterAdjustHeight",[u]))},_animate:function(n,t,i){var r=this.options.easing;this.options.animateFunction!==null?this.options.animateFunction(n,t,r,i):this.container.animate(n,t,r,i)},_positionElements:function(){this._calculateItemDimension();this._calculateCoverDimention();this.container.css(this.animatedAttribute,"0px");this.isModeHorizontal()?this._positionHorizontal():this._positionVertical()},_positionHorizontal:function(){var t=0;this._getItems(!0).each(function(i,r){var u=n(r);u.css({left:t+"px"});t+=u.outerWidth(!0)});this.container.css("width",t+"px")},_positionVertical:function(){this.isAxisY()?this._positionVerticalAxisY():this._positionVerticalAxisX()},_positionVerticalAxisX:function(){var t=0,i=0,u=this.options.perPage,f=this.options.cover,r=0;this._getItems(!0).each(function(e,o){var s=n(o);s.css({top:i+"px",left:t+"px"});r++;r===u||f&&e===0?(r=0,i=0,t+=s.outerWidth(!0)):i+=s.outerHeight(!0)});this.container.css("width",t+this.itemWidth+"px")},_positionVerticalAxisY:function(){var i=0,t=0,r=this.options.perPage,u=this.options.cover;this._getItems(!0).each(function(r,u){var f=n(u);f.css({top:t+"px",left:i+"px"});t+=f.outerHeight(!0)});this.container.css({width:i+this.itemWidth+"px",height:t+this.itemHeight})},_calculateTotalPages:function(){this.totalPages=Math.ceil(this._getItems().length/this.options.perPage);this.options.cover&&(this.totalPages+=1)},_calculateMaxShiftAvailable:function(n){var t=this.options.perPage-n.length;return(this.isAxisY()?this.itemHeight:this.itemWidth)*t},_calculateItemPosition:function(t){return this._abs(n(t).css(this.animatedAttribute))},_calculateItemsForPagination:function(n){var t=this.options.cover?(n-1)*this.options.perPage:n*this.options.perPage;return this._getItems().slice(t-this.options.perPage,t)},_calculateWidth:function(n,t){return this.options.cover&&t?this.coverWidth:n.length*this.itemWidth},_calculateItemDimension:function(){var i=this.options.cover?":eq(1)":":first",t=n("."+this.options.itemClass+i,this.container);this.itemWidth=t.outerWidth(!0);this.itemHeight=t.outerHeight(!0)},_calculateCoverDimention:function(){if(this.options.cover){var n=this._getCover();this.coverWidth=n.outerWidth(!0);this.coverHeight=n.outerWidth(!0)}else this.coverWidth=0,this.coverHeight=0},_validateAnimationEasing:function(){var t=!!(n.easing&&n.easing[this.options.easing]);t||(this.options.easing=n.fn.silverTrack.options.easing)},_executeAll:function(n,t){for(var i=0;i<this.plugins.length;i++)this._callFunction(this.plugins[i],n,t)},_callFunction:function(n,t,i){n&&t&&typeof n[t]=="function"&&n[t].apply(n,[this].concat(i||[]))},_abs:function(n){return Math.abs(parseInt(n,10))}};i.Plugins={};n.silverTrackPlugin=function(t,r){i.Plugins[t]=function(i){var r=n.extend({},this.defaults,i);this.PluginName=t;this.initialize(r)};i.Plugins[t].prototype=n.extend({defaults:{},initialize:function(){},onInstall:function(){},beforeStart:function(){},afterStart:function(){},beforeRestart:function(){},afterRestart:function(){},onTotalPagesUpdate:function(){},beforeAnimation:function(){},afterAnimation:function(){},beforePagination:function(){},beforeAdjustHeight:function(){},afterAdjustHeight:function(){}},r)};t.SilverTrack=i})(jQuery,window,document);