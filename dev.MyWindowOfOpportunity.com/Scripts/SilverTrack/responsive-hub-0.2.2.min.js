/*!
 * ResponsiveHub - JavaScript goodies for Responsive Design
 * https://github.com/globocom/responsive-hub
 * version: 0.2.2
 */
(function(n,t){n.responsiveHub=function(n){if(typeof n=="object")i.init(n);else if(typeof n=="string"){var u=[].splice.call(arguments,0,arguments.length),r=u.splice(0,1)[0];if(i[r])return i[r].apply(i,u);t.console&&t.console.log&&console.log("[ResponsiveHub] Undefined method '"+r+"'")}};var i={NAMESPACE:"ResponsiveHub_",NAMESPACE_READY:"ResponsiveHubReady_",currentLayout:null,resizeBound:!1,hasMediaQuerySupport:!1,windowObj:null,loaded:!1,resizeStopDelay:500,_resizeTimer:null,init:function(n){this.loaded||(this.loaded=!0,this.windowObj=this._getWindow(),this.layouts=n.layouts,this.defaultLayout=n.defaultLayout,this._boot())},self:function(){return this},width:function(){return this.windowObj.width()},layout:function(){var n,t,r,u,f,i;if(!this.hasMediaQuerySupport)return this.defaultLayout;n=[];t=this._keys(this.layouts);for(r in t)n.push(parseInt(t[r],10));n.sort(function(n,t){return t-n});u=this.width();for(f in n)if(i=n[f],u>=i)return this.layouts[i];return this.layouts[n[n.length-1]]},ready:function(n,t){this._bind(this.NAMESPACE_READY,n,t)},change:function(n,t){this._bind(this.NAMESPACE,n,t)},isResizing:function(){return this._resizeTimer!==null},resizeStart:function(n){this.windowObj.bind("resizeStart",n)},resizeStop:function(n){this.windowObj.bind("resizeStop",n)},isTouch:function(){var n=(this.windowObj||this._getWindow()).get(0);return!!("ontouchstart"in n||n.DocumentTouch&&n.document instanceof DocumentTouch)},hasFlash:function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){}var n=this._mimeTypeFlash();return!!(n&&n.enabledPlugin)},_updateLayout:function(){var t=n.responsiveHub("self"),i=t.layout();i!=t.currentLayout&&(t.currentLayout=i,t.windowObj.trigger(t.NAMESPACE+i,[t._newEvent()]))},_resizeStartStop:function(t){var i=n.responsiveHub("self");i._resizeTimer?clearTimeout(i._resizeTimer):i.windowObj.trigger("resizeStart",[t]);i._resizeTimer=setTimeout(function(){i._resizeTimer=null;i.windowObj.trigger("resizeStop",[t])},i.resizeStopDelay)},_boot:function(){if(this.hasMediaQuerySupport=Modernizr.mq("only all"),!this.resizeBound&&this.hasMediaQuerySupport&&(this.windowObj.bind("resize",this._updateLayout),this.windowObj.bind("resize",this._resizeStartStop),this.resizeBound=!0),!this.currentLayout){this.currentLayout=this.layout();var n=this.NAMESPACE_READY+this.currentLayout;this.windowObj.trigger(n,[this._newEvent()]);this.windowObj.unbind(n)}},_bind:function(i,r,u){var o=this,f=this._flatten(this._isArray(r)?r:[r]),e=function(n,t){u(t)};n.each(f,function(r,u){n(t).bind(i+u,e)})},_newEvent:function(){return{layout:this.currentLayout,touch:this.isTouch()}},_keys:Object.keys||function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&(t[t.length]=i);return t},_flatten:function(n,t){var r=this,i=function(n,t,u){for(var f,e=0;e<n.length;e++)f=n[e],r._isArray(f)?t?u.push(f):i(f,t,u):u.push(f);return u};return i(n,t,[])},_getWindow:function(){return n(t)},_mimeTypeFlash:function(){return navigator.mimeTypes["application/x-shockwave-flash"]},_isArray:Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}}})(jQuery,window,document);