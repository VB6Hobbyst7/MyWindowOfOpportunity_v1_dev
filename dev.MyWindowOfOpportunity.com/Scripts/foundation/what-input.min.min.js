!function(n,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():n.whatInput=t()}(this,function(){"use strict";function c(n){clearTimeout(h);f(n);e=!0;h=setTimeout(function(){e=!1},1e3)}function u(n){e||f(n)}function f(i){var f=s(i),e=l(i),u=b[i.type];"pointer"===u&&(u=a(i));t!==u&&(!w&&t&&"keyboard"===u&&"tab"!==r[f]&&p.indexOf(e.nodeName.toLowerCase())>=0||(t=u,n.setAttribute("data-whatinput",t),-1===o.indexOf(t)&&o.push(t)));"keyboard"===u&&v(f)}function s(n){return n.keyCode?n.keyCode:n.which}function l(n){return n.target||n.srcElement}function a(n){return"number"==typeof n.pointerType?k[n.pointerType]:n.pointerType}function v(n){-1===i.indexOf(r[n])&&r[n]&&i.push(r[n])}function y(n){var u=s(n),t=i.indexOf(r[u]);-1!==t&&i.splice(t,1)}var h,i=[],n=document.body,e=!1,t=null,p=["input","select","textarea"],w=n.hasAttribute("data-whatinput-formtyping"),b={keydown:"keyboard",mousedown:"mouse",mouseenter:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},o=[],r={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},k={2:"touch",3:"touch",4:"mouse"};return function(){var t="mousedown";window.PointerEvent?t="pointerdown":window.MSPointerEvent&&(t="MSPointerDown");n.addEventListener(t,u);n.addEventListener("mouseenter",u);"ontouchstart"in document.documentElement&&n.addEventListener("touchstart",c);n.addEventListener("keydown",u);n.addEventListener("keyup",y)}(),{ask:function(){return t},keys:function(){return i},types:function(){return o},set:f}});