(function(n,t){var i=t.event,r,u;i.special.smartresize={setup:function(){t(this).bind("resize",i.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",i.special.smartresize.handler)},handler:function(n,t){var i=this,u=arguments;n.type="smartresize";r&&clearTimeout(r);r=setTimeout(function(){jQuery.event.handle.apply(i,u)},t==="execAsap"?0:100)}};t.fn.smartresize=function(n){return n?this.bind("smartresize",n):this.trigger("smartresize",["execAsap"])};t.Accordion=function(n,i){this.$el=t(i);this.$items=this.$el.children("ul").children("li");this.itemsCount=this.$items.length;this._init(n)};t.Accordion.defaults={open:-1,oneOpenedItem:!1,speed:600,easing:"easeInOutExpo",scrollSpeed:900,scrollEasing:"easeInOutExpo"};t.Accordion.prototype={_init:function(n){this.options=t.extend(!0,{},t.Accordion.defaults,n);this._validate();this.current=this.options.open;this.$items.find("div.st-content").hide();this._saveDimValues();this.current!=-1&&this._toggleItem(this.$items.eq(this.current));this._initEvents()},_saveDimValues:function(){this.$items.each(function(){var n=t(this);n.data({originalHeight:n.find("a:first").height(),offsetTop:n.offset().top})})},_validate:function(){(this.options.open<-1||this.options.open>this.itemsCount-1)&&(this.options.open=-1)},_initEvents:function(){var i=this;this.$items.find("a:first").bind("click.accordion",function(){var n=t(this).parent();return i.options.oneOpenedItem&&i._isOpened()&&i.current!==n.index()&&i._toggleItem(i.$items.eq(i.current)),i._toggleItem(n),!1});t(n).bind("smartresize.accordion",function(){i._saveDimValues();i.$el.find("li.st-open").each(function(){var n=t(this);n.css("height",n.data("originalHeight")+n.find("div.st-content").outerHeight(!0))});i._isOpened()&&i._scroll()})},_isOpened:function(){return this.$el.find("li.st-open").length>0},_toggleItem:function(n){var t=n.find("div.st-content");n.hasClass("st-open")?(this.current=-1,t.stop(!0,!0).fadeOut(this.options.speed),n.removeClass("st-open").stop().animate({height:n.data("originalHeight")},this.options.speed,this.options.easing)):(this.current=n.index(),t.stop(!0,!0).fadeIn(this.options.speed),n.addClass("st-open").stop().animate({height:n.data("originalHeight")+t.outerHeight(!0)},this.options.speed,this.options.easing),this._scroll(this))},_scroll:function(n){var n=n||this,i;i=n.current!==-1?n.current:n.$el.find("li.st-open:last").index();t("html, body").stop().animate({scrollTop:n.options.oneOpenedItem?n.$items.eq(i).data("offsetTop"):n.$items.eq(i).offset().top},n.options.scrollSpeed,n.options.scrollEasing)}};u=function(n){this.console&&console.error(n)};t.fn.accordion=function(n){if(typeof n=="string"){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"accordion");if(!r){u("cannot call methods on accordion prior to initialization; attempted to call method '"+n+"'");return}if(!t.isFunction(r[n])||n.charAt(0)==="_"){u("no such method '"+n+"' for accordion instance");return}r[n].apply(r,i)})}else this.each(function(){var i=t.data(this,"accordion");i||t.data(this,"accordion",new t.Accordion(n,this))});return this}})(window,jQuery);