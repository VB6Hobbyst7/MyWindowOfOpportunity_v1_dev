(function(n){n.prettyLoader={version:"1.0.1"};n.prettyLoader=function(t){function i(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}return t=jQuery.extend({animation_speed:"fast",bind_to_ajax:!0,delay:!1,loader:"/images/prettyLoader/ajax-loader.gif",offset_top:13,offset_left:10},t),scrollPos=i(),imgLoader=new Image,imgLoader.onerror=function(){alert("Preloader image cannot be loaded. Make sure the path is correct in the settings and that the image is reachable.")},imgLoader.src=t.loader,t.bind_to_ajax&&jQuery(document).ajaxStart(function(){n.prettyLoader.show()}).ajaxStop(function(){n.prettyLoader.hide()}),n.prettyLoader.positionLoader=function(i){i=i?i:window.event;cur_x=i.clientX?i.clientX:cur_x;cur_y=i.clientY?i.clientY:cur_y;left_pos=cur_x+t.offset_left+scrollPos.scrollLeft;top_pos=cur_y+t.offset_top+scrollPos.scrollTop;n(".prettyLoader").css({top:top_pos,left:left_pos})},n.prettyLoader.show=function(r){n(".prettyLoader").size()>0||(scrollPos=i(),n("<div><\/div>").addClass("prettyLoader").addClass("prettyLoader_"+t.theme).appendTo("body").hide(),n("<img />").attr("src",t.loader).appendTo(".prettyLoader"),n(".prettyLoader").fadeIn(t.animation_speed),n(document).bind("click",n.prettyLoader.positionLoader),n(document).bind("mousemove",n.prettyLoader.positionLoader),n(window).scroll(function(){scrollPos=i();n(document).triggerHandler("mousemove")}),r=r?r:t.delay,r&&setTimeout(function(){n.prettyLoader.hide()},r))},n.prettyLoader.hide=function(){n(document).unbind("click",n.prettyLoader.positionLoader);n(document).unbind("mousemove",n.prettyLoader.positionLoader);n(window).unbind("scroll");n(".prettyLoader").fadeOut(t.animation_speed,function(){n(this).remove()})},this}})(jQuery);